# 实践课7 - 功能拓展

## 同组成员聊天功能的扩展

根据整个项目的[架构](https://github.com/2016-Software-Reuse-Group-7/chat-room/blob/master/doc/%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84.md)以及此功能的特点
- 首先需要在服务端扩展一种信息类型，为`CLIENT_GROUP_CHAT`。客户端传来的信息中包含信息类型。
- `Server`的`Dispatcher`中识别出这种类型后，创建出新的`Handler`的类型，来处理新的信息类型。
- `Server`中实现`sendMessagesToGroup`，传入`GroupID`，返回`group`的列表，在列表中逐个发送信息。

就此，扩展了此功能。

## 压缩功能的扩展

这次实践中所做的更新:

1. 上次任务中将性能指数记录、消息记录、定时压缩都写在一起，这次扩展压缩功能之前先将后两块提出来作为单独的工具

2. 使用配置管理工具从配置文件内读取记录文件位置、压缩文件位置

3. 实现每周的压缩功能：

- 规定每周一3:00进行压缩
- 压缩文件都是以压缩时间为文件名,所以在客户端或用户端开启时先检测是否有应该已被重新压缩归档过的压缩文件，即文件名显示压缩时间早于上一次重新压缩归档时间，有的话进行处理
- 然后设置一个定时器，定时重新归档压缩
- 重新归档压缩后删除原文件